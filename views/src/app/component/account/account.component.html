<div class='background'>
  <div class='header'>
    <img class='logo' [routerLink]="['/home']"  src='assets/images/logo.png'>
  
    <div id='smallprofile' [matMenuTriggerFor]="appMenu" style="background-image: url('http://www.personalbrandingblog.com/wp-content/uploads/2017/08/blank-profile-picture-973460_640-300x300.png')"></div>
    <mat-menu #appMenu="matMenu">
      <button mat-menu-item>{{'account.account' | translate}}</button>
      <button mat-menu-item>{{'account.logout' | translate}}</button>
    </mat-menu>
  </div>
  <div class='body'>
      <h1 translate>account.account</h1>
      <mat-divider ></mat-divider>
      <div class='section'>
        <h2 class='mini-header'> {{'account.lang' | translate}} </h2>
        <mat-form-field class='form'>
            <mat-select [(ngModel)]='user.lang' name='lang' (change)='changeLang()'>
              <mat-option value="en">
                English
              </mat-option>
              <mat-option value="fr">
                Fran√ßais
              </mat-option>
            </mat-select>
          </mat-form-field>
      </div>
    <div *ngIf="is_local_strategy">
      <mat-divider ></mat-divider>
      <div class='section'>
          <h2 class='mini-header'> {{'account.personal' | translate}} </h2>
          <form #editForm='ngForm'>
              <mat-form-field class='input'>
                <input [(ngModel)]="user.email" name='email' #email='ngModel' pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" matInput placeholder="E-mail" required>
                <mat-error *ngIf="email.invalid && (email.dirty || email.touched)" translate>
                  Please enter a valid e-mail
                </mat-error>
              </mat-form-field> <br>
    
              <mat-form-field class='input'>
                <input [(ngModel)]="user.login" name='login' matInput [placeholder]="'signin.login' | translate" required>
              </mat-form-field> <br>
    
              <mat-form-field class='input'>
                <input [(ngModel)]="user.given_name" name='first' matInput [placeholder]="'account.firstname' | translate" required>
              </mat-form-field> <br>
    
              <mat-form-field class='input'>
                <input [(ngModel)]="user.family_name" name='last' matInput [placeholder]="'account.lastname' | translate" required>
              </mat-form-field> <br>
                
              <button mat-raised-button class='input' (click)="updateProfile()" style='margin-bottom: 20px; margin-top:30px;' [disabled]='!editForm.valid'>{{'account.update' | translate }}</button>
          </form>
      </div>
      <mat-divider></mat-divider>
      <div class='section'>
          <h2 class='mini-header'> {{'account.pwdchange' | translate}} </h2>
          <form #changePwdForm='ngForm'>
    
              <mat-form-field class='input'>
                  <input [(ngModel)]="password" name='password' type='password' matInput #pwd='ngModel' [placeholder]="'signin.password' | translate" pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$" required>
                  <mat-error *ngIf="pwd.invalid && (pwd.dirty || pwd.touched)" translate>
                    Password must be at least 6 characters long and must contain at least a number and a letter
                  </mat-error>
                </mat-form-field> <br>
    
                <mat-form-field class='input'>
                  <input [(ngModel)]="repeatpwd" name='password' type='password' matInput #repeat='ngModel' [placeholder]="'signin.repeatpwd' | translate" required>
                  <mat-hint class='mat-error' *ngIf="noMatch && (repeat.dirty || repeat.touched)" translate>

                  </mat-hint>
                </mat-form-field> <br>
                
              <button mat-raised-button class='input' (click)='changePassword()' style='margin-bottom: 20px; margin-top:30px;' [disabled]='!changePwdForm.valid'>{{'account.confirm' | translate }}</button>
          </form>
      </div>
      <mat-divider></mat-divider>
      <div class='section'>
          <div [hidden]='!upload'>
              <input #fileInput (change)="uploadPicture($event)" id="file" type="file" name="file" accept="image/*">
          </div>
          <h2 class='mini-header'> {{'account.profilePicture' | translate}} </h2>
          <button mat-raised-button class='input' (click)='fileInput.click()' style='margin-bottom: 20px; margin-top:30px;'>{{'account.uploadPic' | translate }}</button>
      </div>
    </div>
  </div>
</div>
